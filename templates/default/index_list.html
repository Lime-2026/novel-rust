<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ detail.articlename | default(value="æœªçŸ¥å°è¯´") }} - {{ SITE_NAME }}</title>
    <link rel="stylesheet" href="/static/{{theme}}/css/base.css">
    <link rel="stylesheet" href="/static/{{theme}}/css/info.css">
</head>
<body>
{% include "default/components/header.html" %}

<main class="container">
    <div class="breadcrumb">
        <a href="/">é¦–é¡µ</a>
        <span>></span>
        <a href="{{ detail.sort_url }}">{{ detail.sortname }}</a>
        <span>></span>
        <a href="{{detail.info_url}}">{{ detail.articlename }}</a>
        <span>></span>
        <span>ç« èŠ‚åˆ—è¡¨</span>
    </div>
    <div class="info-card">
        <div class="info-cover">
            {% if detail.img_url %}
            <img src="{{ detail.img_url }}" alt="{{ detail.articlename }}">
            {% else %}
            <div class="info-placeholder">ğŸ“–</div>
            {% endif %}
        </div>
        <div class="info-content">
            <h1 class="info-title">{{ detail.articlename | default(value="æœªçŸ¥å°è¯´") }}</h1>

            <div class="info-meta">
                <span>ä½œè€…: {{ detail.author }}</span>
                <span>åˆ†ç±»: {{ detail.sortname }}</span>
                <span>å­—æ•°: {{ detail.words_w }}ä¸‡å­—</span>
                <span>æœ€åæ›´æ–°: {{ detail.lastupdate | date(format="%Y-%m-%d %H:%M:%S") }}</span>
            </div>

            <div class="intro-box">
                <div class="intro-content" id="introContent">
                    {{ detail.intro | default(value="æš‚æ— ç®€ä»‹...") | safe }}
                </div>
                <button class="toggle-intro" id="toggleIntroBtn">å±•å¼€å…¨éƒ¨</button>
            </div>
        </div>
    </div>
    <div class="section">
        <h2 class="section-title">ğŸ“‘ æœ€è¿‘æ›´æ–°</h2>
        <div class="chapters-card">
            {% if last_chapters | length > 0 %}
            <div class="chapters-grid">
                {% for chapter in last_chapters %}
                <a href="{{ chapter.read_url }}" class="chapter-item">
                    {{ chapter.chaptername | default(value="æœªçŸ¥ç« èŠ‚") }}
                </a>
                {% endfor %}
            </div>
            {% else %}
            <div class="empty-tip">æš‚æ— æœ€è¿‘æ›´æ–°ç« èŠ‚</div>
            {% endif %}
        </div>
    </div>
    <div class="section">
        <h2 class="section-title">ğŸ“š ç« èŠ‚åˆ—è¡¨ (ç¬¬{{ page }}é¡µ)</h2>
        <div class="chapters-card">
            {% if cut_chapters | length > 0 %}
            <div class="chapters-grid">
                {% for chapter in cut_chapters %}
                <a href="{{ chapter.read_url }}" class="chapter-item">
                    {{ chapter.chaptername | default(value="æœªçŸ¥ç« èŠ‚") }}
                </a>
                {% endfor %}
            </div>
            {% else %}
            <div class="empty-tip">æš‚æ— ç« èŠ‚æ•°æ®</div>
            {% endif %}
        </div>
    </div>
    <div class="section">
        <div class="chapters-card">
            <div class="pagination-wrapper">
                <a href="{{prev_url}}" class="pagination-btn {% if prev_url == detail.info_url %}pagination-btn--disabled{% endif %}">
                    ä¸Šä¸€é¡µ
                </a>
                <div class="pagination-select-wrap">
                    <select id="chapterSelect" class="pagination-select" onchange="self.location.href=options[selectedIndex].value">
                        {% for page_url in page_urls %}
                        <option value="{{ page_url.url }}" {% if page_url.select %}selected="selected"{% endif %}>
                            ç¬¬{{ page_url.page }}é¡µ
                        </option>
                        {% endfor %}
                    </select>
                </div>
                <a href="{{next_url}}" class="pagination-btn {% if next_url == detail.info_url %}pagination-btn--disabled{% endif %}">
                    ä¸‹ä¸€é¡µ
                </a>
            </div>
        </div>
    </div>
</main>

{% include "default/components/footer.html" %}
<script src="/static/{{theme}}/js/base.js"></script>
<script>
    // ç®€ä»‹æŠ˜å é€»è¾‘
    const introContent = document.getElementById('introContent');
    const toggleBtn = document.getElementById('toggleIntroBtn');

    // ç®€å•åˆ¤æ–­æ˜¯å¦éœ€è¦æŠ˜å 
    if (introContent.scrollHeight <= 120) {
        toggleBtn.style.display = 'none';
    } else {
        toggleBtn.addEventListener('click', function() {
            introContent.classList.toggle('expanded');
            this.textContent = introContent.classList.contains('expanded') ? 'æ”¶èµ·ç®€ä»‹' : 'å±•å¼€å…¨éƒ¨';
        });
    }
</script>
</body>
</html>